%PDF-1.4
%“Œ‹ž ReportLab Generated PDF document http://www.reportlab.com
1 0 obj
<<
/F1 2 0 R /F2 3 0 R /F3 4 0 R
>>
endobj
2 0 obj
<<
/BaseFont /Helvetica /Encoding /WinAnsiEncoding /Name /F1 /Subtype /Type1 /Type /Font
>>
endobj
3 0 obj
<<
/BaseFont /Helvetica-Bold /Encoding /WinAnsiEncoding /Name /F2 /Subtype /Type1 /Type /Font
>>
endobj
4 0 obj
<<
/BaseFont /Courier /Encoding /WinAnsiEncoding /Name /F3 /Subtype /Type1 /Type /Font
>>
endobj
5 0 obj
<<
/Contents 34 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 33 0 R /Resources <<
/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
>> /Rotate 0 /Trans <<

>> 
  /Type /Page
>>
endobj
6 0 obj
<<
/Contents 35 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 33 0 R /Resources <<
/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
>> /Rotate 0 /Trans <<

>> 
  /Type /Page
>>
endobj
7 0 obj
<<
/A <<
/S /URI /Type /Action /URI (mailto:ray.burns@velocityglobal.co.nz)
>> /Border [ 0 0 0 ] /Rect [ 234.1029 120.8236 372.6329 132.8236 ] /Subtype /Link /Type /Annot
>>
endobj
8 0 obj
<<
/Annots [ 7 0 R ] /Contents 36 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 33 0 R /Resources <<
/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
>> /Rotate 0 
  /Trans <<

>> /Type /Page
>>
endobj
9 0 obj
<<
/Contents 37 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 33 0 R /Resources <<
/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
>> /Rotate 0 /Trans <<

>> 
  /Type /Page
>>
endobj
10 0 obj
<<
/Contents 38 0 R /MediaBox [ 0 0 595.2756 841.8898 ] /Parent 33 0 R /Resources <<
/Font 1 0 R /ProcSet [ /PDF /Text /ImageB /ImageC /ImageI ]
>> /Rotate 0 /Trans <<

>> 
  /Type /Page
>>
endobj
11 0 obj
<<
/Outlines 13 0 R /PageLabels 39 0 R /PageMode /UseNone /Pages 33 0 R /Type /Catalog
>>
endobj
12 0 obj
<<
/Author () /CreationDate (D:20240712134015-12'00') /Creator (\(unspecified\)) /Keywords () /ModDate (D:20240712134015-12'00') /Producer (ReportLab PDF Library - www.reportlab.com) 
  /Subject (\(unspecified\)) /Title (vnextcloud.py) /Trapped /False
>>
endobj
13 0 obj
<<
/Count 23 /First 14 0 R /Last 29 0 R /Type /Outlines
>>
endobj
14 0 obj
<<
/Dest [ 5 0 R /XYZ 62.69291 729.0236 0 ] /Next 15 0 R /Parent 13 0 R /Title (Introduction)
>>
endobj
15 0 obj
<<
/Dest [ 5 0 R /XYZ 62.69291 474.0236 0 ] /Next 16 0 R /Parent 13 0 R /Prev 14 0 R /Title (Python Version)
>>
endobj
16 0 obj
<<
/Count 4 /Dest [ 5 0 R /XYZ 62.69291 423.0236 0 ] /First 17 0 R /Last 20 0 R /Next 21 0 R /Parent 13 0 R 
  /Prev 15 0 R /Title (Configuration)
>>
endobj
17 0 obj
<<
/Dest [ 5 0 R /XYZ 62.69291 390.0236 0 ] /Next 18 0 R /Parent 16 0 R /Title (NextCloud User)
>>
endobj
18 0 obj
<<
/Dest [ 5 0 R /XYZ 62.69291 306.0236 0 ] /Next 19 0 R /Parent 16 0 R /Prev 17 0 R /Title (NextCloud Flows)
>>
endobj
19 0 obj
<<
/Dest [ 5 0 R /XYZ 62.69291 122.9291 0 ] /Next 20 0 R /Parent 16 0 R /Prev 18 0 R /Title (vNextCloud Configuration)
>>
endobj
20 0 obj
<<
/Dest [ 6 0 R /XYZ 62.69291 131.8236 0 ] /Parent 16 0 R /Prev 19 0 R /Title (A note regarding passwords.)
>>
endobj
21 0 obj
<<
/Dest [ 8 0 R /XYZ 62.69291 573.8236 0 ] /Next 22 0 R /Parent 13 0 R /Prev 16 0 R /Title (Calling Procedure)
>>
endobj
22 0 obj
<<
/Count 4 /Dest [ 8 0 R /XYZ 62.69291 408.8236 0 ] /First 23 0 R /Last 26 0 R /Next 27 0 R /Parent 13 0 R 
  /Prev 21 0 R /Title (Testing)
>>
endobj
23 0 obj
<<
/Dest [ 8 0 R /XYZ 62.69291 375.8236 0 ] /Next 24 0 R /Parent 22 0 R /Title (Regression Testing.)
>>
endobj
24 0 obj
<<
/Dest [ 8 0 R /XYZ 62.69291 315.8236 0 ] /Next 25 0 R /Parent 22 0 R /Prev 23 0 R /Title (Setup)
>>
endobj
25 0 obj
<<
/Dest [ 8 0 R /XYZ 62.69291 267.8236 0 ] /Next 26 0 R /Parent 22 0 R /Prev 24 0 R /Title (Logging on to nextcloud)
>>
endobj
26 0 obj
<<
/Dest [ 8 0 R /XYZ 62.69291 195.8236 0 ] /Parent 22 0 R /Prev 25 0 R /Title (Processing and checking)
>>
endobj
27 0 obj
<<
/Count 1 /Dest [ 9 0 R /XYZ 62.69291 687.0236 0 ] /First 28 0 R /Last 28 0 R /Next 29 0 R /Parent 13 0 R 
  /Prev 22 0 R /Title (Under the Covers)
>>
endobj
28 0 obj
<<
/Dest [ 9 0 R /XYZ 62.69291 654.0236 0 ] /Parent 27 0 R /Title (onxtcld.py)
>>
endobj
29 0 obj
<<
/Count 3 /Dest [ 10 0 R /XYZ 62.69291 595.8236 0 ] /First 30 0 R /Last 32 0 R /Parent 13 0 R /Prev 27 0 R 
  /Title (Pronto Hosted Services)
>>
endobj
30 0 obj
<<
/Dest [ 10 0 R /XYZ 62.69291 514.8236 0 ] /Next 31 0 R /Parent 29 0 R /Title (Creating the Virtual Environment)
>>
endobj
31 0 obj
<<
/Dest [ 10 0 R /XYZ 62.69291 406.8236 0 ] /Next 32 0 R /Parent 29 0 R /Prev 30 0 R /Title (Creating the flow job)
>>
endobj
32 0 obj
<<
/Dest [ 10 0 R /XYZ 62.69291 278.9424 0 ] /Parent 29 0 R /Prev 31 0 R /Title (Distributing the Code)
>>
endobj
33 0 obj
<<
/Count 5 /Kids [ 5 0 R 6 0 R 8 0 R 9 0 R 10 0 R ] /Type /Pages
>>
endobj
34 0 obj
<<
/Length 6342
>>
stream
1 0 0 1 0 0 cm  BT /F1 12 Tf 14.4 TL ET
q
1 0 0 1 62.69291 741.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 4 Tm /F2 20 Tf 24 TL 167.7049 0 Td (vnextcloud.py) Tj T* -167.7049 0 Td ET
Q
Q
q
1 0 0 1 62.69291 708.0236 cm
q
BT 1 0 0 1 0 3.5 Tm 21 TL /F2 17.5 Tf 0 0 0 rg (Introduction) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 654.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 38 Tm /F1 10 Tf 12 TL 2.367045 Tw (The purpose of this code is to create quicklinks automatically as they are added to nextcloud. It is) Tj T* 0 Tw 2.650651 Tw (assumed, that the "Flow" component has been added to nextcloud and flows have been added to) Tj T* 0 Tw .566988 Tw (determine whether a file should be added to quicklinks or not. This might be because a file is in a folder,) Tj T* 0 Tw (owner by a certain user or the user is a member of a certain group.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 636.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (The program must be called with a file owner \(--owner\) and a full path to the file \(--file\).) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 618.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (The program will create a public share if:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 612.0236 cm
Q
q
1 0 0 1 62.69291 612.0236 cm
Q
q
1 0 0 1 62.69291 600.0236 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 10.5 0 Td (\177) Tj T* -10.5 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (The program is called with --create-public-share) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 62.69291 594.0236 cm
Q
q
1 0 0 1 62.69291 558.0236 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 21 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 10.5 0 Td (\177) Tj T* -10.5 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F1 10 Tf 12 TL .56061 Tw (The program is called with --public-keyword followed by the keyword. In which case the ini file must) Tj T* 0 Tw .28061 Tw (contain the publickeyword key. The public keyword will cause the program to create a public share if) Tj T* 0 Tw (the keyword occurs anywhere in the path \(including the filename\).) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 62.69291 558.0236 cm
Q
q
1 0 0 1 62.69291 540.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (In Addition:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 534.0236 cm
Q
q
1 0 0 1 62.69291 534.0236 cm
Q
q
1 0 0 1 62.69291 522.0236 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 10.5 0 Td (\177) Tj T* -10.5 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (If configured, the program will add the file and the url for the public share to a text file.) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 62.69291 516.0236 cm
Q
q
1 0 0 1 62.69291 504.0236 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 10.5 0 Td (\177) Tj T* -10.5 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (If configured, the program will perform some logging) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 62.69291 498.0236 cm
Q
q
1 0 0 1 62.69291 486.0236 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 10.5 0 Td (\177) Tj T* -10.5 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (If configured, the program will pass the file, owner and URL to a Pronto API for adding to quicklinks.) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 62.69291 486.0236 cm
Q
q
1 0 0 1 62.69291 453.0236 cm
q
BT 1 0 0 1 0 3.5 Tm 21 TL /F2 17.5 Tf 0 0 0 rg (Python Version) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 435.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (Written and tested on Python 3.10.13. Package versions as per REQUIREMENTS.txt) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 402.0236 cm
q
BT 1 0 0 1 0 3.5 Tm 21 TL /F2 17.5 Tf 0 0 0 rg (Configuration) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 372.0236 cm
q
BT 1 0 0 1 0 3 Tm 18 TL /F2 15 Tf 0 0 0 rg (NextCloud User) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 318.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 38 Tm /F1 10 Tf 12 TL .16683 Tw (A user should be configured in NextCloud with a name like "quicklinks" \(or similar\). It should be in a group) Tj T* 0 Tw -0.071512 Tw (with all other users. The folder structure should be shared with all other users so that users can add files to) Tj T* 0 Tw 1.870988 Tw (the share. Note that when a user adds a file to a folder that has been shared by another user \(e.g.) Tj T* 0 Tw (quicklinks\) then the file owner is the owner of the shared folder \(e.g. quicklinks\)) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 288.0236 cm
q
BT 1 0 0 1 0 3 Tm 18 TL /F2 15 Tf 0 0 0 rg (NextCloud Flows) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 258.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F1 10 Tf 12 TL .217485 Tw (NextCloud should be configured to use "flows". There is an flow that can be downloaded called "Workflow) Tj T* 0 Tw (external scripts". This should be downloaded and installed.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 216.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F1 10 Tf 12 TL 1.122988 Tw (Create a flow that occurs when a file is created. It should have a filter that selects the public files \(e.g.) Tj T* 0 Tw .895318 Tw (where user = "public"\). The flow should call the vnextcloud python script using the parameters specified) Tj T* 0 Tw (below:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 182.8236 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 468.6898 24 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F3 10 Tf 12 TL (/root/PycharmProjects/vnextcloud/vnextcloud.sh %o %f  --create-public-share) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 162.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (If required a log can be created using:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 134.9291 cm
q
q
.789465 0 0 .789465 0 0 cm
q
1 0 0 1 6.6 8.360088 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 594 24 re B*
Q
q
BT 1 0 0 1 0 2 Tm 12 TL /F3 10 Tf 0 0 0 rg (/root/PycharmProjects/vnextcloud/vnextcloud.sh %o %f  --create-public-share ) Tj (>) Tj (>) Tj ( /tmp/flow.log 2) Tj (>) Tj (&) Tj (1) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 104.9291 cm
q
BT 1 0 0 1 0 3 Tm 18 TL /F2 15 Tf 0 0 0 rg (vNextCloud Configuration) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 86.9291 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (This application requires a configuration file. An example is shown here:) Tj T* ET
Q
Q
 
endstream
endobj
35 0 obj
<<
/Length 6682
>>
stream
1 0 0 1 0 0 cm  BT /F1 12 Tf 14.4 TL ET
q
1 0 0 1 62.69291 583.8236 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 468.6898 180 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 158 Tm /F3 10 Tf 12 TL ([SETUP]) Tj T* (url = https://nextcloud189.velocityglobal.co.nz) Tj T* (nextcloudroot = /var/www/html/nextcloud/data) Tj T* (applog = /var/www/html/nextcloud/vnextcloud.log) Tj T* (loglevel = DEBUG) Tj T* (datalog = /tmp/vnextcloud.csv) Tj T* (prontourl = https://raydemo.velocityglobal.co.nz:8440) Tj T* (prontoapiuser = someuser) Tj T* (prontoapipassword = somepassword) Tj T* (#publickeyword = public) Tj T*  T* ([USERPASSWORDS]) Tj T* (public = mypublicpassword) Tj T* (quicklinks = myquicklinkspasswords) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 563.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (The following notes apply:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 557.8236 cm
Q
q
1 0 0 1 62.69291 143.8236 cm
q
1 1 1 rg
n 0 414 469.8898 -18 re f*
.878431 .878431 .878431 rg
n 0 396 469.8898 -42 re f*
1 1 1 rg
n 0 354 469.8898 -54 re f*
.878431 .878431 .878431 rg
n 0 300 469.8898 -18 re f*
1 1 1 rg
n 0 282 469.8898 -30 re f*
.878431 .878431 .878431 rg
n 0 252 469.8898 -42 re f*
1 1 1 rg
n 0 210 469.8898 -18 re f*
.878431 .878431 .878431 rg
n 0 192 469.8898 -18 re f*
1 1 1 rg
n 0 174 469.8898 -18 re f*
.878431 .878431 .878431 rg
n 0 156 469.8898 -54 re f*
1 1 1 rg
n 0 102 469.8898 -102 re f*
.960784 .960784 .862745 rg
n 0 414 469.8898 -18 re f*
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 399 cm
q
.960784 .960784 .862745 rg
n 0 0 114.3145 12 re f*
Q
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 49.37723 0 Td (key) Tj T* -49.37723 0 Td ET
Q
Q
q
1 0 0 1 132.3145 399 cm
q
.960784 .960784 .862745 rg
n 0 0 331.5753 12 re f*
Q
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 140.7827 0 Td (Description) Tj T* -140.7827 0 Td ET
Q
Q
0 0 0 rg
q
1 0 0 1 6 381 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (url) Tj T* ET
Q
Q
q
1 0 0 1 132.3145 369 cm
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F1 10 Tf 12 TL (This is the url of the nextcloud server. It should have proper certificate) Tj T* (installed and working for this application to work properly.) Tj T* ET
Q
Q
q
1 0 0 1 132.3145 357 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (** The Program will not run without this configuration item **) Tj T* ET
Q
Q
q
1 0 0 1 6 339 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (nextcloudroot) Tj T* ET
Q
Q
q
1 0 0 1 132.3145 315 cm
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F1 10 Tf 12 TL (This is the root of the nextcloud data folder. In order to create the public) Tj T* (share this part of file path will be removed from the front of the newly) Tj T* (created file.) Tj T* ET
Q
Q
q
1 0 0 1 132.3145 303 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (** The Program will not run without this configuration item **) Tj T* ET
Q
Q
q
1 0 0 1 6 285 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (applog) Tj T* ET
Q
Q
q
1 0 0 1 132.3145 285 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (The name of a file into which this application will create log records.) Tj T* ET
Q
Q
q
1 0 0 1 6 267 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (loglevel) Tj T* ET
Q
Q
q
1 0 0 1 132.3145 255 cm
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F1 10 Tf 12 TL (The logging Level. Must be one of CRITICAL, ERROR, WARNING, INFO,) Tj T* (DEBUG NOTSET) Tj T* ET
Q
Q
q
1 0 0 1 6 237 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (datalog) Tj T* ET
Q
Q
q
1 0 0 1 132.3145 213 cm
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F1 10 Tf 12 TL (This the name of file on the nextcloud server. If provided a a record will be) Tj T* -0.126979 Tw (written to this file with the date, time, The filename, a public URI and the file) Tj T* 0 Tw (no) Tj T* ET
Q
Q
q
1 0 0 1 6 195 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (prontourl) Tj T* ET
Q
Q
q
1 0 0 1 132.3145 195 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (These parameters define a PRONTO url upon which an api \(vapiql.spl\)) Tj T* ET
Q
Q
q
1 0 0 1 6 177 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (prontoapiwebresource) Tj T* ET
Q
Q
q
1 0 0 1 132.3145 177 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (must be available. The URL should be the same url as that the) Tj T* ET
Q
Q
q
1 0 0 1 6 159 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (prontoapiuser) Tj T* ET
Q
Q
q
1 0 0 1 132.3145 159 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (pronto web ui is running \(including the same port number\).) Tj T* ET
Q
Q
q
1 0 0 1 6 141 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (prontoapipassword) Tj T* ET
Q
Q
q
1 0 0 1 132.3145 105 cm
q
0 0 0 rg
BT 1 0 0 1 0 38 Tm /F1 10 Tf 12 TL (This program will call the api passing the appropriate parameters The user) Tj T* (and password and the relevant user and passwords to call the api. The) Tj T* (webresource is the name of the webresource containing the the vapiql) Tj T* (program.) Tj T* ET
Q
Q
q
1 0 0 1 6 87 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (USERPASSWORDS) Tj T* ET
Q
Q
q
1 0 0 1 132.3145 39 cm
q
0 0 0 rg
BT 1 0 0 1 0 50 Tm /F1 10 Tf 12 TL (This section should contain a list of users and their passwords that are to) Tj T* (be used in the quicklinks shares. i.e. It should only have users and) Tj T* (passwords for those users who will have files added to pronto quicklinks.) Tj T* (These are the "dummy" users \(not real users\). Calls to this program pass a) Tj T* (file and an owner. It is the owner that must appear in this list of passwords.) Tj T* ET
Q
Q
q
1 0 0 1 132.3145 3 cm
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F1 10 Tf 12 TL (IT is assumed that a "quicklinks" user of some kind is defined and all files) Tj T* (and folders owned by that user are available to all other users. Only files) Tj T* (added to folders owned by these people will be processed.) Tj T* ET
Q
Q
q
1 J
1 j
0 0 0 RG
.25 w
n 0 396 m 469.8898 396 l S
n 0 354 m 469.8898 354 l S
n 0 300 m 469.8898 300 l S
n 0 282 m 469.8898 282 l S
n 0 252 m 469.8898 252 l S
n 0 210 m 469.8898 210 l S
n 0 192 m 469.8898 192 l S
n 0 174 m 469.8898 174 l S
n 0 156 m 469.8898 156 l S
n 0 102 m 469.8898 102 l S
n 126.3145 0 m 126.3145 414 l S
n 0 414 m 469.8898 414 l S
n 0 0 m 469.8898 0 l S
n 0 0 m 0 414 l S
n 469.8898 0 m 469.8898 414 l S
Q
Q
Q
q
1 0 0 1 62.69291 143.8236 cm
Q
q
1 0 0 1 62.69291 113.8236 cm
q
BT 1 0 0 1 0 3 Tm 18 TL /F2 15 Tf 0 0 0 rg (A note regarding passwords.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 83.82362 cm
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F1 10 Tf 12 TL .56683 Tw (The ini file contains passwords for both the nextcloud users and the pronto api user. It is possible that to) Tj T* 0 Tw (store those passwords in clear text, though this is not recommended.) Tj T* ET
Q
Q
 
endstream
endobj
36 0 obj
<<
/Length 6797
>>
stream
1 0 0 1 0 0 cm  BT /F1 12 Tf 14.4 TL ET
q
1 0 0 1 62.69291 729.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F1 10 Tf 12 TL .125318 Tw (The system supports encrytped passwords that use the standard pronto encrypt and decrypt as defined in) Tj T* 0 Tw 2.053984 Tw (the Pronot 4gl programming manual. To use encrypted passwords the ini file entry must contain the) Tj T* 0 Tw (encrypted password and the initialisation vector and these should be comma separated. For example) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 671.8236 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 468.6898 48 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F3 10 Tf 12 TL (rayb = RFcP+D3OmvpeNXVieA==,*UGd:0M/jJpI=KpD) Tj T* (raysharee = Yh/J/xduRtaH9Zrpww==,hE82^\)D8Nk_M+Qvw) Tj T* (public = e2Kdera521Ti8YmqviY=,//?wiB@Im;8ks\(@1) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 615.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 38 Tm /F1 10 Tf 12 TL .104269 Tw (The pronto program vqlmntauto contains an option under "parameters" that will generate these entries. As) Tj T* 0 Tw .079985 Tw (per the Pronto documentation, the encryted text is base64 encoded, therefore there is a guarantee that no) Tj T* 0 Tw -0.110569 Tw (comma will exist in the encoded text. Vqlmntauto has code in it that also ensure the initialisation vector can) Tj T* 0 Tw (contain no commas.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 585.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F1 10 Tf 12 TL .875542 Tw (Finally note that the secret key part of the encryption algorthim is hard coded into both the python code) Tj T* 0 Tw (and the pronto code. Therefore it is important that access to both sets of code is restricted.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 552.8236 cm
q
BT 1 0 0 1 0 3.5 Tm 21 TL /F2 17.5 Tf 0 0 0 rg (Calling Procedure) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 534.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (The python program has the following parameters) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 528.8236 cm
Q
q
1 0 0 1 62.69291 420.8236 cm
q
1 1 1 rg
n 0 108 469.8898 -18 re f*
.878431 .878431 .878431 rg
n 0 90 469.8898 -30 re f*
1 1 1 rg
n 0 60 469.8898 -30 re f*
.878431 .878431 .878431 rg
n 0 30 469.8898 -30 re f*
.960784 .960784 .862745 rg
n 0 108 469.8898 -18 re f*
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 93 cm
q
.960784 .960784 .862745 rg
n 0 0 85.41617 12 re f*
Q
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 19.36809 0 Td (Parameter) Tj T* -19.36809 0 Td ET
Q
Q
q
1 0 0 1 103.4162 93 cm
q
.960784 .960784 .862745 rg
n 0 0 360.4736 12 re f*
Q
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 155.2318 0 Td (Description) Tj T* -155.2318 0 Td ET
Q
Q
0 0 0 rg
q
1 0 0 1 6 75 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (--file) Tj T* ET
Q
Q
q
1 0 0 1 103.4162 75 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (The path to the file. Should be the full path from the root) Tj T* ET
Q
Q
q
1 0 0 1 103.4162 63 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (** MANDATORY **) Tj T* ET
Q
Q
q
1 0 0 1 6 45 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (--owner) Tj T* ET
Q
Q
q
1 0 0 1 103.4162 45 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (The owner of the file) Tj T* ET
Q
Q
q
1 0 0 1 103.4162 33 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (** MANDATORY **) Tj T* ET
Q
Q
q
1 0 0 1 6 15 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (--configfile) Tj T* ET
Q
Q
q
1 0 0 1 103.4162 15 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (The path to the vnextcloud.ini file.) Tj T* ET
Q
Q
q
1 0 0 1 103.4162 3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (** OPTIONAL **) Tj T* ET
Q
Q
q
1 J
1 j
0 0 0 RG
.25 w
n 0 90 m 469.8898 90 l S
n 0 60 m 469.8898 60 l S
n 0 30 m 469.8898 30 l S
n 97.41617 0 m 97.41617 108 l S
n 0 108 m 469.8898 108 l S
n 0 0 m 469.8898 0 l S
n 0 0 m 0 108 l S
n 469.8898 0 m 469.8898 108 l S
Q
Q
Q
q
1 0 0 1 62.69291 420.8236 cm
Q
q
1 0 0 1 62.69291 387.8236 cm
q
BT 1 0 0 1 0 3.5 Tm 21 TL /F2 17.5 Tf 0 0 0 rg (Testing) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 357.8236 cm
q
BT 1 0 0 1 0 3 Tm 18 TL /F2 15 Tf 0 0 0 rg (Regression Testing.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 327.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F1 10 Tf 12 TL .166098 Tw (When changing the code, there is a full set of regression tests defined in the testcases.py file. This should) Tj T* 0 Tw (be run each time the code changes.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 297.8236 cm
q
BT 1 0 0 1 0 3 Tm 18 TL /F2 15 Tf 0 0 0 rg (Setup) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 279.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (If pays to review the vnextcloud.ini file. It may be useful to change the logging level from INFO to DEBUG) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 249.8236 cm
q
BT 1 0 0 1 0 3 Tm 18 TL /F2 15 Tf 0 0 0 rg (Logging on to nextcloud) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 207.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F1 10 Tf 12 TL 1.51229 Tw (Testing on nextcloud189.velocityglobal.co.nz should be done by logging into Nextcloud as rayb or any) Tj T* 0 Tw .794488 Tw (user that is not public. Whichever user is used, the user must belong to the group "staff" and be able to) Tj T* 0 Tw (see the quicklinks share folder eg "Quicklinks Documents" or "Public Documents".) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 177.8236 cm
q
BT 1 0 0 1 0 3 Tm 18 TL /F2 15 Tf 0 0 0 rg (Processing and checking) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 159.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (Then:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 153.8236 cm
Q
q
1 0 0 1 62.69291 153.8236 cm
Q
q
1 0 0 1 62.69291 141.8236 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 10.5 0 Td (\177) Tj T* -10.5 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (Add a file to the Public Documents/Stock folder) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 62.69291 135.8236 cm
Q
q
1 0 0 1 62.69291 123.8236 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 10.5 0 Td (\177) Tj T* -10.5 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
BT 1 0 0 1 0 2 Tm 12 TL /F1 10 Tf 0 0 0 rg (Wait... an email has been sent to ) Tj 0 0 .501961 rg (ray.burns@velocityglobal.co.nz) Tj 0 0 0 rg ( \(see vnextcloud.sh\)) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 62.69291 117.8236 cm
Q
q
1 0 0 1 62.69291 105.8236 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 10.5 0 Td (\177) Tj T* -10.5 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (Check the application log) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 62.69291 99.82362 cm
Q
q
1 0 0 1 62.69291 87.82362 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 10.5 0 Td (\177) Tj T* -10.5 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (Check the csv) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 62.69291 81.82362 cm
Q
 
endstream
endobj
37 0 obj
<<
/Length 6844
>>
stream
1 0 0 1 0 0 cm  BT /F1 12 Tf 14.4 TL ET
q
1 0 0 1 62.69291 717.0236 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 33 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 10.5 0 Td (\177) Tj T* -10.5 0 Td ET
Q
Q
q
1 0 0 1 23 33 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (Check Pronto to see if quicklink has been added.) Tj T* ET
Q
Q
q
1 0 0 1 23 27 cm
Q
q
1 0 0 1 23 27 cm
Q
q
1 0 0 1 23 15 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 10.5 0 Td (\177) Tj T* -10.5 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (Should have url) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 23 9 cm
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 10.5 0 Td (\177) Tj T* -10.5 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (User only nums have shareid and fileid) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 23 -3 cm
Q
q
Q
Q
Q
q
1 0 0 1 62.69291 711.0236 cm
Q
q
1 0 0 1 62.69291 699.0236 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 10.5 0 Td (\177) Tj T* -10.5 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (Check /pro/data/sat/vapiql.log. This has a log of what the api processed) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 62.69291 699.0236 cm
Q
q
1 0 0 1 62.69291 666.0236 cm
q
BT 1 0 0 1 0 3.5 Tm 21 TL /F2 17.5 Tf 0 0 0 rg (Under the Covers) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 636.0236 cm
q
BT 1 0 0 1 0 3 Tm 18 TL /F2 15 Tf 0 0 0 rg (onxtcld.py) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 618.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (onxtcld contains the definition of the NxtCld class. This is where the majority of the work is done.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 576.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 26 Tm /F1 10 Tf 12 TL .469986 Tw (Instances of the class should be instantiated with the url, user and password for nextcloud. The user and) Tj T* 0 Tw 2.141654 Tw (password should be the user and password for the owner of the file that is about to be processed.) Tj T* 0 Tw (Additionally, the class can be instantiated with a filename.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 546.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F1 10 Tf 12 TL 1.650988 Tw (The class must be instantiated with a URL to the next Cloud server, a user id to connect with and a) Tj T* 0 Tw (password for that user. Optionally a path can be added to the instantiation or set via the setter.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 516.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F1 10 Tf 12 TL .608651 Tw (Essentially the oject is instantiated with the url, username and password. Other variables that control the) Tj T* 0 Tw (behaviour of the class should then be set.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 438.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 62 Tm /F1 10 Tf 12 TL 1.472485 Tw (It is MOST important to note that the determination of the shares is done by __process_shares. Each) Tj T* 0 Tw .703828 Tw (getter of the readonly variables \(share_url, public_share_id and file_id\) will invoke __process_shares if it) Tj T* 0 Tw 1.531984 Tw (has not already been executed. The two methods that do things with the shares \(add_to_csv_file and) Tj T* 0 Tw 3.58498 Tw (add_pronto_quicklink\) will also invoke the process_shares function if has not already been done.) Tj T* 0 Tw 1.006303 Tw (Therefore, all the object consumer has to do is to access a property or invoke a mehthod for the share) Tj T* 0 Tw (processing to execute.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 420.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (The Object then does three essential functions:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 414.0236 cm
Q
q
1 0 0 1 62.69291 312.0236 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
BT 1 0 0 1 0 2 Tm  T* ET
q
1 0 0 1 20 96 cm
Q
q
1 0 0 1 20 96 cm
Q
q
1 0 0 1 20 36 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 45 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 5.66 0 Td (a.) Tj T* -5.66 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 50 Tm /F1 10 Tf 12 TL 1.112765 Tw (A share url is deterined. This could be a public share, or a private share. If so configured the) Tj T* 0 Tw .410514 Tw (object will create a public share and return the url or, if no public share exists and the no option) Tj T* 0 Tw .380514 Tw (has been taken to create one, then a private url is returned. A file id is always available, but the) Tj T* 0 Tw .261984 Tw (public_share_id is only available if a public share already exists or has been newly created. The) Tj T* 0 Tw (boolean variable __shares_processed is set when the object has completed this task) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 20 30 cm
Q
q
1 0 0 1 20 18 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 5.66 0 Td (b.) Tj T* -5.66 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (An entry is made in a log file.) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 20 12 cm
Q
q
1 0 0 1 20 0 cm
q
0 0 0 rg
BT /F1 10 Tf 12 TL ET
q
1 0 0 1 6 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL 6.22 0 Td (c.) Tj T* -6.22 0 Td ET
Q
Q
q
1 0 0 1 23 -3 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (A pronto API is called to add the quicklink.) Tj T* ET
Q
Q
q
Q
Q
Q
q
1 0 0 1 20 0 cm
Q
q
Q
Q
Q
q
1 0 0 1 62.69291 312.0236 cm
Q
q
1 0 0 1 62.69291 294.0236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (Usage:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 128.7807 cm
q
q
.766291 0 0 .766291 0 0 cm
q
1 0 0 1 6.6 8.612914 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 612 204 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 182 Tm /F3 10 Tf 12 TL (# Instantiate the class with user) Tj T* (thiscloud = onxtcld.NxtCld\(global_url, pgm_args.owner, ownerpassword\(pgm_args.owner\)\)) Tj T* (# Set critical properties) Tj T* (# public shares are created only if optionally_create_public_share is true or) Tj T* (# a keyword has been defined.  If a keyword has been defined then the public share) Tj T* (# is created if the keyword is found in the path or filename.) Tj T* (thiscloud.optionally_create_public_share = TRUE) Tj T* (# or) Tj T* (thiscloud.public_share_keyword = 'shared') Tj T* (# Finally set the file path.  This invokes the processing.) Tj T* (thiscloud.file_path = Fullpathtofile) Tj T*  T* (# Access the properties) Tj T* (# The determination of returned properties is in the property getter itself.  The object keeps track) Tj T* (# of whether the determination of the values has already been done.) Tj T* (print\(thiscloud.first_public_share_url\)) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 83.58067 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 468.6898 36 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F3 10 Tf 12 TL (print\(thiscloud.first_public_share_id\)) Tj T* (# create publicshare:) Tj T* ET
Q
Q
Q
Q
Q
 
endstream
endobj
38 0 obj
<<
/Length 3708
>>
stream
1 0 0 1 0 0 cm  BT /F1 12 Tf 14.4 TL ET
q
1 0 0 1 62.69291 607.8236 cm
q
q
1 0 0 1 0 0 cm
q
1 0 0 1 6.6 6.6 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 468.6898 156 re B*
Q
q
0 0 0 rg
BT 1 0 0 1 0 134 Tm /F3 10 Tf 12 TL (thiscloud.create_public_share\(\)) Tj T* (# access URL) Tj T* (print\(thiscloud.url\)) Tj T* (print\(thiscloud.fileid\)) Tj T* (print\(thiscloud.shareid\)) Tj T* (# add to logfile) Tj T* (thiscloud.add_to_log_file\('/tmp/logfile.log'\)) Tj T* (# or) Tj T* (thiscloud.log_file = '/tmp/logfile.log') Tj T* (thiscloud.add_to_log_file\(\)) Tj T* (# Call pronto API) Tj T* (thiscloud.add_pronto_quicklink\(url,user,password\)) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 574.8236 cm
q
BT 1 0 0 1 0 3.5 Tm 21 TL /F2 17.5 Tf 0 0 0 rg (Pronto Hosted Services) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 556.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (The following notes apply to running the application within the Pronto Hosted Services environment.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 526.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F1 10 Tf 12 TL 1.616457 Tw (There is a special user in nextcloud called quicklinks. Files and folders belonging to this user are the) Tj T* 0 Tw (application and it runs from the folders beloning to that user.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 496.8236 cm
q
BT 1 0 0 1 0 3 Tm 18 TL /F2 15 Tf 0 0 0 rg (Creating the Virtual Environment) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 466.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F1 10 Tf 12 TL .536235 Tw (This application runs in a Python Virtual Environment using Venv. The code is all stored within nextcloud) Tj T* 0 Tw (itself.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 448.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (There is a script to build the virtual environment called crtvenv.sh.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 418.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F1 10 Tf 12 TL .382209 Tw (Before running, this script needs reviewing. There are four key variables that are defined at the top of the) Tj T* 0 Tw (script and these will need to be reviewed before execution.) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 388.8236 cm
q
BT 1 0 0 1 0 3 Tm 18 TL /F2 15 Tf 0 0 0 rg (Creating the flow job) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 358.8236 cm
q
0 0 0 rg
BT 1 0 0 1 0 14 Tm /F1 10 Tf 12 TL .074987 Tw (There is a different version of the script for running at PHS. It is called vnextcloudphs.sh. We cannot make) Tj T* 0 Tw (the executing procedure "executable", therefore it is called by bash:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 333.9846 cm
q
q
.668216 0 0 .668216 0 0 cm
q
1 0 0 1 6.6 9.87704 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 702 24 re B*
Q
q
BT 1 0 0 1 0 2 Tm 12 TL /F3 10 Tf 0 0 0 rg (/bin/bash /var/www/html/nextcloud/data/quicklinks/files/test_310a/vnextcloudphs.sh %o %f  ) Tj (>) Tj (>) Tj ( /tmp/testflow.log 2) Tj (>) Tj (&) Tj (1) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 313.9846 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (or, to create a share:) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 290.9424 cm
q
q
.596913 0 0 .596913 0 0 cm
q
1 0 0 1 6.6 11.05689 cm
q
.662745 .662745 .662745 RG
.5 w
.960784 .960784 .862745 rg
n -6 -6 786 24 re B*
Q
q
BT 1 0 0 1 0 2 Tm 12 TL /F3 10 Tf 0 0 0 rg (/bin/bash /var/www/html/nextcloud/data/quicklinks/files/test_310a/vnextcloudphs.sh %o %f --create-share ) Tj (>) Tj (>) Tj ( /tmp/testflow.log 2) Tj (>) Tj (&) Tj (1) Tj T* ET
Q
Q
Q
Q
Q
q
1 0 0 1 62.69291 260.9424 cm
q
BT 1 0 0 1 0 3 Tm 18 TL /F2 15 Tf 0 0 0 rg (Distributing the Code) Tj T* ET
Q
Q
q
1 0 0 1 62.69291 242.9424 cm
q
0 0 0 rg
BT 1 0 0 1 0 2 Tm /F1 10 Tf 12 TL (There is a shell script called phsdistro.sh which builds /tmp/vnextcloud.tar This can be sent to PHS.) Tj T* ET
Q
Q
 
endstream
endobj
39 0 obj
<<
/Nums [ 0 40 0 R 1 41 0 R 2 42 0 R 3 43 0 R 4 44 0 R ]
>>
endobj
40 0 obj
<<
/S /D /St 1
>>
endobj
41 0 obj
<<
/S /D /St 2
>>
endobj
42 0 obj
<<
/S /D /St 3
>>
endobj
43 0 obj
<<
/S /D /St 4
>>
endobj
44 0 obj
<<
/S /D /St 5
>>
endobj
xref
0 45
0000000000 65535 f 
0000000073 00000 n 
0000000124 00000 n 
0000000231 00000 n 
0000000343 00000 n 
0000000448 00000 n 
0000000653 00000 n 
0000000858 00000 n 
0000001047 00000 n 
0000001270 00000 n 
0000001475 00000 n 
0000001681 00000 n 
0000001787 00000 n 
0000002058 00000 n 
0000002133 00000 n 
0000002246 00000 n 
0000002374 00000 n 
0000002540 00000 n 
0000002655 00000 n 
0000002784 00000 n 
0000002922 00000 n 
0000003050 00000 n 
0000003181 00000 n 
0000003341 00000 n 
0000003461 00000 n 
0000003580 00000 n 
0000003717 00000 n 
0000003841 00000 n 
0000004010 00000 n 
0000004108 00000 n 
0000004271 00000 n 
0000004405 00000 n 
0000004541 00000 n 
0000004664 00000 n 
0000004749 00000 n 
0000011143 00000 n 
0000017877 00000 n 
0000024726 00000 n 
0000031622 00000 n 
0000035382 00000 n 
0000035459 00000 n 
0000035493 00000 n 
0000035527 00000 n 
0000035561 00000 n 
0000035595 00000 n 
trailer
<<
/ID 
[<fe41602e0c5a8fe946726d0cae0807cb><fe41602e0c5a8fe946726d0cae0807cb>]
% ReportLab generated PDF document -- digest (http://www.reportlab.com)

/Info 12 0 R
/Root 11 0 R
/Size 45
>>
startxref
35629
%%EOF
